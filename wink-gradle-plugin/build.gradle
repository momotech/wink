apply plugin: 'java-gradle-plugin'
apply plugin: 'kotlin'
apply plugin: 'maven-publish'

buildscript {
    ext {
        gradleVersion = '7.2.2'
        kotlinVersion = '1.6.10'
    }
    repositories {
        google()
        jcenter()
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
    }
}

repositories {
    google()
    jcenter()
    mavenLocal()
    mavenCentral()
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10"
    implementation "com.android.tools.build:gradle:$gradleVersion"
    implementation 'com.github.doyaaaaaken:kotlin-csv-jvm:0.15.2'
    implementation 'org.apache.httpcomponents:httpcore:4.4.10'
    implementation 'com.android.tools:common:26.5.0'
    implementation 'org.eclipse.jgit:org.eclipse.jgit:5.11.0.202103091610-r'
    implementation "com.google.code.gson:gson:2.8.2"

    implementation 'org.javassist:javassist:3.26.0-GA'
    implementation 'org.ow2.asm:asm:9.0'
    implementation "com.squareup:javapoet:1.13.0"
    testImplementation "junit:junit:4.12"
}

test.enabled = false
test.setOnlyIf {
    false
}

gradlePlugin {
    plugins {
        winkPlugin {
            id = 'com.immomo.wink.plugin'
            implementationClass = 'com.immomo.wink.WinkPlugin'
        }
    }
}

// 配置生成 jar 包
jar {
    manifest {
        attributes "Implementation-Title": project.name
        attributes "Implementation-Version": '0.3.27'
        attributes 'Main-Class': 'com.immomo.wink.JavaEntrance'//,
    }
}

//apply from: '../wink-publish/upload_plugin.gradle'

